<!DOCTYPE html>
<title>FileReader-i-002-001-Test FileReader.addEventListener - loadstart.</title>
<link rel="stylesheet" href="../resources/style.css"/>
<script src="../resources/lib.js"></script>
<script>
onload = function() {
    try {
        var t_file = document.getElementById('t_file');
        t_file.onchange = function() {
            try {
                var t_blob = t_file.files[0];
                var t_filerdr = new FileReader();
                t_filerdr.addEventListener("loadstart", function(evt) {
                    if (evt.target !== t_filerdr) {
                        setResult(0, "Event target is not the FileReader instance that generated the event.");
                    } else {
                        setResult(1, "event.target for onloadstart is the FileReader instance where it was registered.");
                    }
                    if (t_filerdr.readyState !== t_filerdr.LOADING) {
                        setResult(0, "readyState of the FileReader instance is not LOADING, got" + t_filerdr.readyState);
                    } else {
                        setResult(1, "readyState of the FileReader instance is LOADING");
                    }
                    if (evt.bubbles !== false) {
                        setResult(0, "event.bubbles is not false.");
                    } else {
                        setResult(1, "event.bubbles is false.");
                    }
                    if (evt.cancelable !== false) {
                        setResult(0, "event.cancellable is not false.");
                    } else {
                        setResult(1, "event.cancellable is false.");
                    }
                    if (evt.cancelBubble !== false) {
                        setResult(0, "event.cancelBubble is not false.");
                    } else {
                        setResult(1, "event.cancelBubble is false.");
                    }
                    if (evt.currentTarget !== t_filerdr) {
                        setResult(0, "event.currentTarget is not the FileReader instance that generated the event.");
                    } else {
                        setResult(1, "event.currentTarget is the FileReader instance that generated the event.");
                    }
                    if (evt.type !== "loadstart") {
                        setResult(0, "event.type is not \"loadstart\".");
                    } else {
                        setResult(1, "event.type is \"loadstart\".");
                    }
                    if (typeof evt.lengthComputable !== "boolean") {
                        setResult(0, "typeof event.lengthComputable is not boolean.");
                    } else {
                        setResult(1, "typeof event.lengthComputable is boolean.");
                    }
                },
                false);
                t_filerdr.readAsArrayBuffer(t_blob);
            } catch(e) {
                setResult(0, "Threw exception:" + e);
            }
        }
    } catch(e) {
        setResult(0, "Threw: " + e);
    }
}
</script>
<body>
<p>Please select a file to test: <input type='file' id='t_file' name='t_file' /></p>
</body>