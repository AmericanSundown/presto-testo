#include <stdio.h>
#include <string.h>
#include <errno.h>

unsigned short bitmap[256] =
{
	0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff,
	0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff,
	0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff,
	0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff,
	0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff,
	0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff,
	0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff,
	0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff,
	0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff,
	0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff,
	0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff,
	0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff,
	0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff,
	0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff,
	0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff,
	0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x000,
	0x1ff, 0x042, 0x1ff, 0x17e, 0x1ff, 0x1ff, 0x1ff, 0x1ff,
	0x176, 0x1ff, 0x057, 0x1ff, 0x157, 0x0c3, 0x0c7, 0x0c3,
	0x042, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff,
	0x174, 0x1ff, 0x057, 0x1ff, 0x157, 0x0c3, 0x0c7, 0x157,
	0x1ff, 0x17f, 0x1ff, 0x1ff, 0x1ff, 0x17f, 0x1ff, 0x1ff,
	0x1ff, 0x1ff, 0x1f7, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff,
	0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff,
	0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff,
	0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff,
	0x1ff, 0x1ff, 0x1df, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff,
	0x1ff, 0x1ff, 0x1f7, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff,
	0x1ff, 0x1df, 0x1df, 0x1df, 0x1df, 0x1df, 0x1df, 0x1df,
	0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff,
	0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff,
	0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff, 0x1ff,
	0x1ff, 0x1ff, 0x1ff, 0x1df, 0x1df, 0x1ff, 0x1ff, 0x1d7
};

int main(void)
{
	FILE *fp[9];
	char filename[10];
	int i, j;

	for (i = 0; i < 9; i ++)
	{
		sprintf(filename, "%d.html", 1250 + i);
		fp[i] = fopen(filename, "w");
		if (!fp[i])
		{
			fprintf(stderr, "Cannot open %s: %s\n", filename, strerror(errno));
			return 1;
		}

		fprintf(fp[i],
		        "<html>\n <head>\n  <meta http-equiv=\"Content-Type\" "
		        "content=\"text/html;charset=windows-%d\">\n"
		        "  <title>Windows codepage %d</title>\n"
	            "  <style>.unused { background: #ccc; }</style>\n",
		        1250 + i, 1250 + i);

		if (i < 8)
			fprintf(fp[i],
			        "  <link rel=\"next\" href=\"%d.html\">\n",
			        1251 + i);
		if (i > 0)
			fprintf(fp[i],
			        "  <link rel=\"prev\" href=\"%d.html\">\n",
			        1249 + i);

		fprintf(fp[i],
				" </head>\n <body>\n"
		        "  <table>\n   <tr><th>  ");

		for (j = 0; j < 16; j ++)
		{
			fprintf(fp[i], "<th>%X", j);
		}
	}

	for (i = 0x20; i < 0x100; i ++)
	{
		for (j = 0; j < 9; j ++)
		{
			if (0 == (i & 0x0F))
			{
				fprintf(fp[j], "\n   <tr><th>%X", i);
			}
			fprintf(fp[j], (bitmap[i] & (1 << j))
			                 ? "<td>%c"
							 : "<td class=unused>%c", (char) i);
		}
	}

	for (i = 0; i < 9; i ++)
	{
		fprintf(fp[i], "\n  </table>\n </body>\n</html>\n");
		fclose(fp[i]);
	}
	return 0;
}
