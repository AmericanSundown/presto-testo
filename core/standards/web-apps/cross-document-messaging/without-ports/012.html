<!doctype html>
<title>loop in array in structured clone</title>
<script src="/resources/jsframework.js"></script>
<script>
test(function() {
  var x = [];
  x[0] = x;
  postMessage(x, '*');
  test(function(e) {
    assertTrue(e.data === e.data[0], 'e.data === e.data[0]');
  }, window, 'message');
/* 2010-09: spec changed to admit cycles & preserve them in the output.
  assertThrows(function() {
    postMessage(x, '*');
  }, [], DOMException, {code:24});
*/
});
</script>
