<!doctype html>
<title>message channel as ports</title>
<script src="/resources/jsframework.js"></script>
<script>
test(function() {
  var channel = new MessageChannel();
  channel[0] = channel.port1;
  channel[1] = channel.port2;
  channel.length = 2;
  postMessage('', '*', channel);
  test(function(e) {
    assertEquals(e.ports.length, 2);
  }, window, 'message');
});
</script>

