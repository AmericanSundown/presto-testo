<!doctype html>
<title>networkState</title>
<pre>FAIL (script didn't run)</pre>
<script>
var v = document.createElement('video');
var log = '';
if (v.networkState != 0)
  log += 'networkState was ' + v.networkState + ' when creating the element, expected 0\n';
document.body.appendChild(v); // runs resource selection algorithm
if (v.networkState != 3)
  log += 'networkState was ' + v.networkState + ' when inserting the element, expected 3\n';
</script>
<!-- now resource selection will continue its sync section -->
<!-- will find neither src nor source, so sets networkState to NETWORK_EMPTY -->
<script>
if (v.networkState != 0)
  log += 'networkState was ' + v.networkState + ' after letting the sync section of resource selection run, expected 0\n';
var passed = log == '';
document.querySelector('pre').textContent = passed ? 'PASS' : 'FAIL\n' + log;
try{top.opener.rr(passed)}catch(e){}
</script>