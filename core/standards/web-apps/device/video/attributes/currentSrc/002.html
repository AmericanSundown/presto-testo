<!DOCTYPE html>
<title>reading the currentSrc of a device-associable element assigned a Stream, after dynamically removing the src attribute</title>
<p>FAIL: script did not run.</p>
<device type="media">
<video src="" autoplay style="visibility:hidden;"></video>
<script type="text/javascript" src="../../../runner.js"></script>
<script>
navigator.getUserMedia("video", success);
function success(stream) {
  var videoEl = document.getElementsByTagName("video")[0];
  videoEl.src = stream;
  videoEl.addEventListener("playing", function() {
    videoEl.removeAttribute("src");
    if (videoEl.currentSrc == "about:streamurl") {
      document.getElementsByTagName("p")[0].innerHTML = "PASS"; 
      runnerResult(true);
    } else {
      document.getElementsByTagName("p")[0].innerHTML = "FAIL"; 
      runnerResult(false);
    }
  }, false);
  videoEl.play();
}
</script>