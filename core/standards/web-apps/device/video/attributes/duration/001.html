<!DOCTYPE html>
<title>checking that duration == Infinity on load</title>
<p>FAIL: script did not run.</p>
<device type="media">
<video src="" autoplay style="visibility:hidden;"></video>
<script type="text/javascript" src="../../../runner.js"></script>
<script>
navigator.getUserMedia("video", success);
function success(stream) {
  var videoEl = document.getElementsByTagName("video")[0];
  videoEl.src = stream;
  videoEl.addEventListener('playing', function() {
    if( videoEl.duration == Infinity ) {
      document.getElementsByTagName("p")[0].innerHTML = "PASS";
      runnerResult(true);
    } else {
      document.getElementsByTagName("p")[0].innerHTML = "FAIL";
      runnerResult(false);
    }
  }, false);
  videoEl.play();
}
</script>