<?xml version="1.0" encoding="UTF-8"?>
 <!DOCTYPE html PUBLIC  "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Tests the capability to handle links into SVG content</title>
<script>

// === Utilitity functions ===
function elementCenterX(element) {
// return the X coordinate for the center of the element
  cstyle = window.getComputedStyle(element);
  return parseInt(cstyle.left) + (parseInt(cstyle.width) / 2);
}

function elementCenterY(element) {
// return the Y coordinate for the center of the element
  GogiBodyTop = 40; // in gogi, the body starts 40 pixels down. 
  cstyle = window.getComputedStyle(element);
  return parseInt(cstyle.top) + (parseInt(cstyle.height) / 2) + GogiBodyTop;
}
// === 

function firemouseevent() {
  if (typeof(opera.generateMouseMove) == 'undefined') {
    var body = document.getElementsByTagName('body')[0];
    body.innerHTML = "Not tested: This test case requires the generateMouseMove function." + body.innerHTML;
  }
  else 
  {
    testimage = document.getElementById("testimage");
    x = elementCenterX(testimage);
    y = elementCenterY(testimage)-30;
    opera.generateMouseMove(x, y);
    opera.generateMouseDown(x, y, 1);
    opera.generateMouseUp(x, y, 1);
    // move away the pointer
    opera.generateMouseMove(0, 0);
  }
}

window.addEventListener("load", function() { setTimeout(firemouseevent, 100) }, false);

</script>
</head>
<body>
<table>
<tr>
<td align="center">SVG Image</td>
<td align="center">Reference Image</td>
</tr>
<tr>
<td align="right">
<object id=testimage data="../../svggen/linking-a-01-b.svg" width="480" height="360" type="image/svg+xml"/></object>
</td>
<td align="left">
<img alt="raster image of linking-a-01-b" src="../../png/full-linking-a-01-b.png" width="480" height="360"/>
</td>
</tr>
</table>
<p>
Pass if the rendered picture match the reference image exactly, except for variations in the labeling text (per CSS2 rules).
</p>
</body>
</html>