<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ev="http://www.w3.org/2001/xml-events">
  <defs>
    <pattern id="subpattern" width="0.1" height="0.1">
      <rect id="patrect" x="0" y="0" width="39" height="9" fill="#f00">
        <animate attributeName="fill" begin="0s" dur="3s" repeatCount="indefinite" from="#f00" to="#0f0"/>
      </rect>
    </pattern>
    <pattern id="pat" xlink:href="#subpattern" width="0.1" height="0.1"></pattern>
    <marker id="markerrect" markerUnits="strokeWidth">
      <rect x="0" y="0" width="3" height="3" fill="url(#pat)"/>
    </marker>
  </defs>
  <line marker="url(#markerrect)" x1="10" y1="20" x2="400" y2="50" stroke="darksalmon" stroke-width="20" onclick="test()"/>
  <text x="15" y="150" font-size="20">The marker colour should animate</text>
</svg>
