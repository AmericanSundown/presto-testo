<!DOCTYPE html>
<html>
  <head>
    <title>Script Scheduler tests</title>
    <script src="harness.js"></script>
    <script>
      var file_names = ['001.html',
                        '002.html',
                        '003.html',
                        '004.html',
                        '005.html',
                        '006.html',
                        '007.html',
                        '008.html',
                        '009.html',
                        '010.html',
                        '011.html',
                        '012.html',
                        '013.html',
                        '014.html',
                        '015.html',
                        '016.html',
                        '017.html',
                        '018.html',
                        '019.html',
                        '020.html',
                        '021.html',
                        '022.html',
                        '023.html',
                        '024.html',
                        '025.html',
                        '026.html',
                        '027.html',
                        '028.html',
                        '029.html',
                        '030.html',
                        '031.html',
                        '032.html',
                        '033.html',
                        '034.html',
                        '035.html',
                        '036.html',
                        '037.html',
                        '038.html',
                        '039.html',
                        '040.html',
                        '041.html',
                        '042.html',
                        '043.html',
                        '044.html',
                        '045.html',
                        '046.html',
                        '047.html',
                        '048.html',
                        '049.html',
                        '050.html',
                        '051.html',
                        '052.html',
                        '053.html',
                        '054.html',
                        '055.html',
                        '056.html',
                        '057.html',
                        '058.html',
                        '059.html',
                        '060.html',
                        '061.html',
                        '062.html',
                        '063.html',
                        '064.html',
                        '065.html',
                        '066.html',
                        '067.html',
                        '068.html',
                        '069.html',
                        '070.html',
                        '071.html',
                        '072.html',
                        '073.html',
                        '074.html',
                        '075.html',
                        '076.html',
                        '077.html',
                        '078.html',
                        '079.html',
                        '080.html',
                        '081.html',
                        '082.html',
                        '083.html',
                        '084.html',
                        '085.html',
                        '086.html',
                        '087.html',
                        '088.html',
                        '089.html',
                        '090.html',
                        '091.html',
                        '092.html',
                        '093.html',
                        '094.html',
                        '095.html',
                        '096.html',
                        '097.html',
                        '098.html',
                        '099.html',
                        '100.html',
                        '101.html',
                        '102.html',
                        '103.html',
                        '104.html',
                        '105.html',
                        '106.html',
                        '107.html',
                        '108.html',
                        '109.html',
                        '110.html',
                        '111.html',
                        '112.html',
                        '113.html',
                        '114.html',
                        '115.html',
                        '117.html',
                        '118.html',
                        '119.html',
                        '120.html',
];

      function run(file_names, filters) {
        clear();
        var limits = get_limits();
        var filter = get_filter();
        if (filter) {
          filters.push(filter);
        }
        document.getElementById("stop").disabled = false;
        run_tests(file_names, filters, limits[0], limits[1]);
      }
      function get_limits() {
        return ["min_index", "max_index"].map(function(x) {
          var element = document.getElementById(x);
          var value = Number(element.value !== "" ? element.value : undefined);
          if (value !== value) {
            return undefined;
          } else {
            return value;
          }
        });
      }
      function get_filter() {
        var element = document.getElementById("filter");
        var re = undefined;
        try {
          re = new RegExp(element.value, "g");
        } catch(e) {}
        return re;
      }
      function stop() {
        done = true;
        document.getElementById("stop").disabled = true;
      }
    </script>
  </head>
  <body>
    <h1>document.write Tests</h1>
    <p>
      Run from test <input type="number" id="min_index"> to test <input type="number" id="max_index"> (leave blank for 0 -&gt; maximum)
    </p>
    <p>Test filter (regexp on filename)<input type="text" id="filter"></p>
    <p>
      <button onclick="run(file_names, [])">Run Tests</button>
    </p>
    <p>
      <button id="stop" onclick="stop()" disabled>Stop</button>
    </p>
    <div id="status"></div>
    <div id="progress"></div>
    <div id="details"></div>
  </body>
</html>
